<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>練習 demo</title>
    <meta property="og:title" content="A9 STUDIO" />
    <meta property="og:url" content="rurulee.com" />
    <meta property="og:image" content="https://rurulee.com/img/og.jpg" />
    <meta property="og:description" content="Ruru's portfolio , Front-End Web Development , 前端網頁開發" />
    <link href="img/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png" />
    <link rel="stylesheet" href="css/all.css" />
    <style>
      .box {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        margin: 5rem auto 0;
        background-color: white;
        width: 50%;
        height: 15rem;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: 0.5s linear;
        transform: translate(0, 0);
        transform-origin: bottom right;
      }
    </style>
  </head>

  <body>
    <div class="content-wrapper position-relative" style="padding-top: 30rem; padding-bottom: 100rem;">
      <div class="w-50 mx-auto">
        <!-- 要滑動到這塊才開始跑進度條 -->
        <div class="progress" style="height: 20px;">
          <div id="prog" style="width: 0; transition: 1.5s linear;" class="progress-bar" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><span id="proglabel"></span></div>
        </div>
      </div>

      <div class="box h2">
        放大
      </div>
    </div>

    <script src="js/jquery.min.js"></script>
    <script>
      //總達成目標 = 5000
      //級距 1000 , 2000 , 5000
      let goalCount = 1000 //目前達成人數

      console.log($('html,body').animate({ scrollTop: $('.work__title').offset() }))
      setTimeout(function () {
        if (goalCount == 1000) {
          $('#prog').css('width', Math.round((1000 / 5000) * 100) + '%')
          $('#proglabel').text(goalCount)
        } else if (goalCount == 2000) {
          $('#prog').css('width', Math.round((2000 / 5000) * 100) + '%')
          $('#proglabel').text(goalCount)
        } else if (goalCount == 5000) {
          $('#prog').css('width', Math.round((5000 / 5000) * 100) + '%')
          $('#proglabel').text(goalCount)
        }
      }, 10)

      var wh = $(window).height() //視窗可視高
      var $window = $(window)
      var $box = $('.box')

      //裝置變動時，重抓高度
      $(window).resize(function () {
        wh = $(window).height()
      })
      timeBox()
      function timeBox() {
        $window.scroll(function () {
          var scrollTop = $window.scrollTop()
          console.log(scrollTop)
          if (scrollTop >= 200 && scrollTop < 400) {
            $box.css({ transform: 'translate(50%,' + (wh - wh / 4) + 'px)' })
            $box.css({ position: 'fixed' })
            $box.css({ left: '65%', width: '15%' })
            $box.css({ margin: '0 auto' })
            $box.css({ height: '10rem' })
            $box.html('縮小')
          } else if (scrollTop == 0) {
            $box.css({ transform: 'translate(0, 0)' })
            $box.css({ position: 'absolute' })
            $box.css({ left: '0', width: '50%' })
            $box.css({ margin: '5rem auto 0' })
            $box.css({ height: '15rem' })
            $box.html('放大')
          }
        })
      }
    </script>
  </body>
</html>
